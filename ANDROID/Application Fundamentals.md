# 어플리케이션 기본 항목

## 안드로이드의 4대 컴포넌트 (앱 구성 요소)

> 각 유형은 뚜렷한 목적을 수행하고 각자 나름의 수명 주기가 있어 구성 요소의 생성 및 소멸 방식을 정의합니다.

- Activity <sup>액티비티</sup>
- Service <sup>서비스</sup>
- Broadcast Receiver <sup>브로드캐스트 리시버</sup>
- Content provider <sup>콘텐츠 제공자</sup>

### 1. Activity

> 화면 관리, 사용자와 상호작용, 이벤트 처리

- 사용자와 상호작용하기 위한 진입점(entry point)으로 UI를 포함한 화면 하나를 나타낸다.
- 안드로이드 어플리케이션은 반드시 하나 이상의 액티비티를 가지고 있어야하며, 두 개의 액티비티를 동시에 Display 할 수 없습니다.

### 2. Service

> UI 없이 백그라운드에서 기능 처리

- 백그라운드에서 실행되는 구성요소로, 오랫동안 실행되는 작업을 수행하거나 원격 프로세스를 위한 작업을 수행합니다.
- 서비스는 UI를 제공하지 않고, 사용자가 다른 앱에 있는 동안에 백그라운드에서 음악을 재생하거나, 사용자와 액티비티 간의 상호작용을 차단하지 않고 네트워크를 통해 데이터를 가져오는 등의 작업을 합니다.
- 컴포넌트를 서비스에 바인딩하여 서비스와 상호작용할 수 있으며, 심지어는 프로세스 간 통신(IPC)도 수행할 수 있습니다. 예를 들어 한 서비스는 네트워크 트랜잭션을 처리하고, 음악을 재생하고 파일 I/O를 수행하거나 콘텐츠 제공자와 상호작용할 수 있으며 이 모든 것을 백그라운드에서 수행할 수 있습니다.

#### 서비스의 3가지 유형

- Foreground
- Background
- Bound

### 3. Broadcast Receiver

> 안드로이드에서 글로벌 이벤트와, 그로 인한 브로드캐스트 메시지를 처리

- 시스템이 일반적인 사용자 플로우 밖에서 이벤트를 앱에 전달하도록 지원하는 구성 요소로, 앱이 시스템 전체의 브로드캐스트 알림에 응답할 수 있게 합니다.
- Broadcast Receiver도 앱으로 들어갈 수 있는 또 다른 명확한 진입점이기 때문에 현재 실행되지 않은 앱에도 시스템이 브로드캐스트를 전달할 수 있습니다.
- 대다수의 브로드캐스트는 시스템에서 발생합니다. 예컨대 화면이 꺼졌거나 배터리가 부족하거나 사진을 캡처했다고 알리는 브로드캐스트가 대표적입니다.
- UI를 표시하지 않지만, notification(상태 표시줄 알림)을 생성하여 사용자에게 브로드캐스트 이벤트가 발생했다고 알릴 수 있습니다.
  - 앱에서 미디어 플레이어와 같이 백그라운드에서 오랫동안 실행되고 사용자에게 표시되는 Service인 '포그라운드 서비스'를 실행 중인 경우 알림이 필수입니다. 이 알림은 다른 알림처럼 닫을 수 없습니다.
- Broadcast Receiver는 BroadcastReceiver의 하위 클래스로 구현되며 각 브로드캐스트는 Intent 객체로 전달됩니다.

### 4. Content provider

> 서로 다른 앱 사이의 데이터 공유를 위한 인터페이스

- 콘텐츠 제공자는 애플리케이션이 자체적으로 저장된 데이터, 다른 앱이 저장한 데이터에 대한 액세스 권한을 관리하도록 돕고 다른 앱과 데이터를 공유할 방법을 제공합니다.
- 데이터를 캡슐화하고, 데이터 보안을 정의하는 데 필요한 메커니즘을 제공합니다. 콘텐츠 제공자는 한 프로세스의 데이터에 다른 프로세스에서 실행 중인 코드를 연결하는 표준 인터페이스입니다.
- 콘텐츠 제공자를 구현하면 많은 장점을 누릴 수 있습니다. 가장 중요한 장점으로는 콘텐츠 제공자를 구성하여 다른 애플리케이션이 앱 데이터에 안전하게 액세스하여 이를 수정할 수 있도록 허용할 수 있다는 사실입니다.

```
Android 시스템 디자인은 어떤 앱이든 다른 앱의 구성 요소를 시작할 수 있다는 점에서 독특한 측면이 있습니다. 
다른 앱에 있는 구성 요소를 활성화하려면 시스템에 메시지를 전달하여 특정 구성 요소를 시작하고자 하는 '인텐트'를 밝혀야 합니다.
그러면 시스템이 대신 해당 구성 요소를 활성화해줍니다.
```

## Manifest 파일

- Android 시스템이 앱 구성 요소를 시작하려면 시스템은 우선 앱의 매니페스트 파일, `AndroidManifest.xml`을 읽어서 해당 구성 요소가 존재하는지 확인합니다. 앱은 이 파일 안에 모든 구성 요소를 선언해야 하며, 이 파일은 앱 프로젝트 디렉토리의 루트에 있어야 함.

### Manifest의 역할들

- 앱이 요구하는 모든 사용자 권한 식별
- 앱에서 사용하거나 요구하는 하드웨어 및 소프트웨어 기능 (예: 카메라, 블루투스 서비스, 멀티터치 화면)을 선언합니다.
- 앱이 링크되어야 하는 **API 라이브러리**(Android 프레임워크 API 제외)(예: Google Maps라이브러리)를 선언합니다.
- 앱이 어느 API를 사용하는지를 근거로 앱에서 요구하는 **최소 API 레벨**을 선언

### 컴포넌트 선언

- 매니페스트의 주요 작업은 시스템에 앱의 구성 요소에 대해 알리는 것입니다. 예를 들어 매니페스트 파일은 액티비티를 다음과 같이 선언할 수 있습니다.

```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest ... >
    <application android:icon="@drawable/app_icon.png" ... >
        <activity android:name="com.example.project.ExampleActivity"
                  android:label="@string/example_label" ... >
        </activity>
        ...
    </application>
</manifest>
```
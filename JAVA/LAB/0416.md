## 가변 인자 처리 방법

### 1. 인자의 전달은 **stack**을 이용한다.

- Calling Convention

    1) **cdecl** → caller가 인자 스택을 정리한다.

    2) **stdcall** → callee가 인자 스택을 정리한다.
        - 스택 중첩이 덜하다.
        - `call back` 개념 → stdcall
        - SOEN, [호출 규약](http://soen.kr/lecture/ccpp/cpp2/16-1-3.htm)

    3) **fastcall** → 레지스터

        - 32비트 운영체제에서는 레지스터가 한정적이다.

    4) **64bit call**

        - 인자의 전달을 레지스터를 이용해서 전달한다.

### 2. 함수 호출 이전의 상태와 함수 호출 후의 스택 상태는 동일해야 한다.

```c
foo(10, 20);
    push 20
    push 10
```

-인자 스택을 정리한다.

### 3. 가변 인자는 `스택`을 통해 인자가 전달된다.

- 가변 인자를 통해 호출된 함수는, 몇 개의 인자가 자신에게 전달되었는지 알 수 없다.

    - 그러므로 C 언어에서는 고정 인자를 통해 몇 개의 인자가 전달되었는지 알려야한다.

- 반드시 **caller**가 인자 스택을 정리한다.
  
<br>

```c
int sum(int n, …) {

    return 42;
}

int main() {
    // printf("%d %d %d", 10, 20, 30);
}
```

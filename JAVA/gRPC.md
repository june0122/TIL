# gRPC (gRPC Remote Procedure Calls)

> 구글이 최초로 개발한 오픈 소스 원격 프로시저 호출 (RPC) 시스템

- 전송을 위해 **HTTP/2**를, 인터페이스 정의 언어로 **프로토콜 버퍼를 사용**하며 인증, 양방향 스트리밍 및 흐름 제어, 차단 및 비차단 바인딩, 취소 및 타임아웃 등의 기능을 제공한다.

- 수많은 언어를 대상으로 크로스 플랫폼 클라이언트 및 서버 바인딩을 생성한다.


## 왜 사용해야 할까?

### 높은 생산성과 효율적인 유지보수

- gRPC는 서비스와 메시지를 정의하기 위해서 Protocol Buffers(이하 ProtoBuf)를 사용한다.

- 아래와 같은 ProtoBuf의 IDL만 정의하면 높은 성능을 보장하는 서비스와 메세지에 대한 소스코드가 자동으로 생성된다.

```proto

```

- 위와 같은 서비스 정의만으로 서버와 클라이언트(Stub<sup id = "a2">[ 2](#f2)</sup>) 코드가 자동으로 생성

- 위 예제의 경우는 sayHello()라는 서비스의 비지니스 로직과 클라이언트에서 Stub을 사용하여 호출해주는 부분만 구현해주면 된다.




### 다양한 언어 및 플랫폼 지원

<br>
<p align = 'center'>
<img src = 'https://user-images.githubusercontent.com/39554623/59169678-38642600-8b76-11e9-8021-2ebb16a2fbc4.png'>
</p>
<br>

- ProtoBuf의 IDL<sup id = "a1">[1 인터페이스 정의 언어](#f1)</sup>을 활용한 서비스 정의 한개로 다양한 언어와 플랫폼에서 동작하는 서버와 클라이언트 코드가 생성된다.

##



-----------------------------------------------------

## <b id = "f1"><sup> 1 </sup></b> IDL </sup></sup>[ ↩](#a1)

> **인터페이스 정의 언어(Interface Description Language 또는 Interface Definition Language, IDL)** 는 소프트웨어 컴포넌트의 인터페이스를 묘사하기 위한 **명세 언어**이다.

- IDL은 **어느 한 언어에 국한되지 않는 언어중립적인 방법으로 인터페이스를 표현**함으로써, 같은 언어를 사용하지 않는 소프트웨어 컴포넌트 사이의 통신을 가능하게 한다.

  - 예를 들면, C++을 사용하여 작성한 컴포넌트와 자바를 사용한 컴포넌트 사이에서 국한되지 않고, **인터페이스를 묘사**하는 개념이다.

- IDL 은 **보통 RPC를 이용한 소프트웨어에서 사용**된다. 이때, RPC "연결"의 양 쪽에 있는 컴퓨터는 다른 운영체제와 프로그래밍 언어를 사용할 수 있다. IDL은 다른 두 개의 시스템을 연결하는 **다리 역할**을 한다.

## <b id = "f2"><sup> 2 </sup></b> Proxy - Stub [ ↩](#a2)

Proxy

### 마셜링<sup> marshalling</sup>

> 객체의 메모리 구조를 저장이나 전송을 위해서 적당한 자료형태로 변형하는 것을 말한다.

- 한 객체의 메모리에서 표현방식을 저장 또는 전송에 적합한 다른 데이터 형식으로 변환하는 과정이다.
- 또한 이는 데이터를 컴퓨터 프로그램의 서로 다른 부분 간에 혹은 한 프로그램에서 다른 프로그램으로 이동해야 할 때도 사용된다.
- 마셜링은 **직렬화(serialization)와 유사**하며 한 오브젝트, 여기서는 직렬화 된 오브젝트로 멀리 떨어진 오브젝트와 통신하기 위해 사용된다.

### 직렬화<sup> serialization</sup>

> 객체의 상태를 저장하기 위해서 객체를 바이트 스트림<sup> byte stream</sup> 으로 변환하는 것을 의미한다. 그 반대는 deserialization 이라고 한다.

### 마셜링<sup> marshalling</sup>과 직렬화<sup> serialization</sup>의 차이

> `마셜링하다` 라는 용어는 파이썬 표준 라이브러리에서 `직렬화하다` 는 용어와 동일하게 간주되지만, 자바 계열 RFC 2713에서는 동일하게 간주되지 않는다.

- 마셜링은 코드베이스를 기록하지만 직렬화를 하지 않는 것이 둘의 다른 점이다. 즉 원격 프로시저를 호출하는 것에서는 유사하지만, 다른 목적을 가졌다.

- 마셜링은 원격 프로시저를 호출할 때 함수의 parameter나 return 값들을 전달할 수 있는데 반해, 직렬화는 구조화된 데이터를 바이트 스트림<sup> byte stream</sup>과 같은 형식으로 복사를 한다.

  - 마셜링은 추가적인 코드 베이스(메타 데이터)를 가질 수 없다는 점이 직렬화와 구분된다.